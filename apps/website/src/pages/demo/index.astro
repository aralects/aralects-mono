---
import SocialSidebar from "@components/sections/Home/SocialSidebar";
import Layout from "@layouts/Layout.astro";
import ContactLayout, { WhiteSection, PurpleSection } from "@components/layouts/ContactLayout";
import PhoneFrame from "@components/sections/Demo/PhoneFrame";
import { DEMO_CONTENT, DEMO_COLORS } from "../../constants/demo";
import { URLS } from "../../config/urls";
import SectionHeader from "@components/common/SectionHeader";
---

<Layout>
  <!-- <main class="flex flex-col h-full">
    <div class="flex flex-col flex-1"> -->
    <ContactLayout>
      <WhiteSection>
        <SectionHeader
          title={DEMO_CONTENT.TITLE.MAIN}
          description={DEMO_CONTENT.TITLE.SUB}
          titleClassName={`text-[${DEMO_COLORS.TITLE}]`}
          descriptionClassName={DEMO_COLORS.DESCRIPTION}
          useDefaultDescriptionClasses={false}
        />
      </WhiteSection>

      <PurpleSection>
        <div class="xl:container xl:mx-auto">
          <SocialSidebar 
            className="absolute left-4 z-10 top-[10%]"
            iconClassName="text-white hover:text-gray-200 opacity-50 hover:opacity-100" 
          />
          <div class="h-full max-w-[45%] sm:max-w-[45%] md:max-w-[50%] w-full xl:container lg:max-w-[55%] xl:max-w-[60%]">
            <p class="text-white w-full font-SpaceGrotesk text-xl sm:text-2xl md:text-[28px] lg:text-[32px] leading-tight sm:leading-none tracking-[0.03em] font-normal">
              {DEMO_CONTENT.DESCRIPTION}
            </p>
          </div>
        </div>
      </PurpleSection>

      <PhoneFrame client:load />

      {/* Hidden initially */}
      <div id="demo-container" class="fixed inset-0 bg-white hidden z-30">
        <button
          id="close-demo-btn"
          class={`absolute top-24 left-4 z-40 bg-[${DEMO_COLORS.BACKGROUND}] text-white px-4 py-2 rounded-lg hover:bg-[${DEMO_COLORS.BUTTON.HOVER}] transition-colors duration-300 flex items-center gap-2`}
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z" clip-path="evenodd" />
          </svg>
          {DEMO_CONTENT.BUTTON.BACK}
        </button>
        <iframe 
          src={URLS.DEMO.IFRAME}
          class="w-full h-full border-0"
          title="Demo Content"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; microphone"
          allowfullscreen
          sandbox="allow-scripts allow-same-origin allow-popups allow-forms"
          loading="lazy"
        />
      </div>
    </ContactLayout>
    <!-- </div>
  </main> -->
</Layout>

<script>
  const startDemoBtn = document.getElementById('start-demo-btn');
  const closeDemoBtn = document.getElementById('close-demo-btn');
  const demoContainer = document.getElementById('demo-container');

  if (startDemoBtn && demoContainer && closeDemoBtn) {
    startDemoBtn.addEventListener('click', () => {
      demoContainer.classList.remove('hidden');
    });

    closeDemoBtn.addEventListener('click', () => {
      demoContainer.classList.add('hidden');
    });
  }
</script>